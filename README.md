#项目名称和作者#
项目名称：用于对温湿度敏感植物的环境监测仪   
作者：邱俊宁 Junning-Qiu
# 1.需求分析 #
&#8195;&#8195;在大自然中有许多珍惜的植物对生长环境要求苛刻，周围环境温湿度的变化对其生长，繁殖有着巨大的影响。这些植物往往很难人工培养，如水晶兰只生长在野外，栽培还只能能从野外移植。同时，还有人参、铁皮石斛等名贵的中药材的培养对环境要求也比较苛刻，因此需要仪器对其生长环境进行监测，必要的时候提醒监测人员。
## 具体需求分析： ##
-   客户要求能对植物生长环境的温度、湿度等参数进行精密测量；
-   能够设置阈值；                                             
-   在环境各种参数波动交大的时候（超出阈值）能够进行警报；
-   能够长时间的在户外工作；
-   不易损坏；
## 技术指标 ##

| 技术指标 | Demand | Wish |
| :--- | :---: | :--- |
| 测量参数 | 温度、湿度| 设置阈值，发出警报 |
| 使用时长 | 一周（甚至更长） | 采用蓄电池  |
| 外表 | 耐磨损 | 美观 |
# 2.问题定义 #
&#8195;&#8195;通过简易的网关和节点及温湿度模块制作一款简洁便携的环境监测仪解决环境监测工具的不普遍性的问题，产品主要用于检测对温湿度敏感的珍惜植物。  
&#8195;&#8195;特点：精确监测温湿度，温湿度超出一定范围后会发出警报；工作时间长，耐磨损。
# 3.国内外产品现状(市场调研) #
## 温湿度仪器仪表发展现状 ##
&#8195;&#8195;温湿度仪器仪表行业的发展与重化工业发展是同一时期的。20世纪80年代以前，温湿度仪器仪表大多应用于实验室，主要测量设备有直流电位差计、直流电桥、交流电桥、检流计、恒温设备等。20世纪80年代中后期，大量的国外先进温湿度测量控制仪表企业进入中国，促进了我国温湿度仪器仪表行业的技术进步。2019年我国温湿度仪表市场容量约为6.60亿元，其中石化行业每年需求约为2.00亿元，电力行业每年约为1.00亿元，冶金行业约为0.50亿元，机械行业约为0.60亿元，计量校准行业约为0.50亿元，其它行业在2.00亿元左右。中国仪器仪表学会预测，未来几年温湿度仪器仪表的需求规模将保持每年10.00%左右的增长速度，按照此增长速度，2020年我国温度仪器仪表市场容量将达到9.66亿元。目前来看，我国温湿度仪器仪表行业正处于行业的成长期，行业下游需求保持增长，行业内企业数量还处于上升阶段，同时市场竞争暂时平缓，市场集中度有待进一步增加。
### 应用领域 ###
&#8195;&#8195;家用，商用，实验室，冷冻链，医药制业，农业
家用相对购买率高，价格便宜，20-70不等，实验室和冷冻，医药产业相对要求高，价格相对昂贵，220-600不等。
## 国内外发展现状 ##
&#8195;&#8195;我国环境监测设备产品销售量主要以水质监测设备和烟尘烟气监测设备为主，两者在总体市场销量中占比66%；然后是数采仪，占比17%；环境空气监测设备和采样器分别占比13%和4%。2008-2019年我国环境监测仪器相关专利公开数量整体呈现上涨的态势，2019年，环境监测仪器行业专利公开数量达到153个。环境监测仪相关专利公开信息，我国的环境监测仪器的技术仍存在数量缺陷。
## 未来发展 ##
&#8195;&#8195;环保行业受政策、法规及监管的驱动，在环境诉求加强的情况下，尤其是进入“十三五”时期，国内环保市场已呈现出前所未有的高速发展趋势。环境监测作为环保产业的一个分支，也有近千亿元的市场潜力。预计未来几年，我国环境监测仪器行业仍将保持较高的速度增长。2019年销售额将达到93亿元，预计2025年有望达到215亿元
# 4.团队介绍 #
队名：workingman
曾童：善于动手创新，对各种传感器有很大的兴趣，在元件模块搜寻方面起领导作用

邱俊宁：善于产生新的想法，能对产品的制作提出一些建设性的改进善于动手创新，对各种传感器有很大的兴趣,在元件模块搜寻方面起领导作用

吴诗语：在资料分析和信息搜集方面擅长，能搜集该项目过程的所需的资料和对结果进行评估和改进对数据有极强    的敏感能力，能对产品数据做一定的分析并提出改进方案

周佳怡：善于产生新的想法，能对产品的制作提出一些建设性的改进

李楚桐：对数据有极强的敏感能力，能对产品数据做一定的分析并提出改进方案
# 5.团建计划 #
1:定义问题

2.替代性概念的产生  
从已有的问题衍生思考，写出几个不同的替代概念，从多个角度切入思考解决问题。

3:方案的选择和评估  
评估多种方案的利弊优劣，选择出效率最高的解决方案并着手设计  

4:详细设计  
按照方案的进行详细的设计。设计出详细的方案。

5.设计制造和步骤  
写出每一步设计的详细步骤

7.性能评估  
根据已经设计好的方案进行评估。评估方案的可行度 步骤。例如检测仪的成本和最后的检测效果

8:设计报告  
根据产品完善好最终的设计报告
# 6. 实现功能和目标 #
-   数据要求可视化、精度高。
-   在监测温湿度的的同时还可以提醒客户；
-   产品尽量小巧，可以悬挂也可以平放，外观简约大方
-   将检测到的数据实时的返回到数据库，方便进行生态研究
# 7.应用场景 #
-   家用，农场、户外皆可
# 8.概念设计 #
1. 外观及其传感器大致分布  
&#8195;&#8195;酸碱度检测部分埋入地下，温湿度的测试置于地表之上。

2. 续航问题  
&#8195;&#8195;计划主要采用硅太能能电池供电，环保节能。为了避免连续阴雨天而导致仪器的无法使用的情况发生，打算再加一个干电池供电。再硅太阳能电池无法工作时，由干电池供电。

3. 数据处理  
&#8195;&#8195;用Loral模块进行数据传输；再产品外加一个LCD屏进行数据显示；还可以将数据导入手机等设备，定时记录报备。

4. 异常温度的处理  
&#8195;&#8195;设置一个温湿度、酸碱度的波动范围，如果检测到的值超出这个范围就会发出警报。

5. 包装材料  
&#8195;&#8195;由于主要的使用场景实在户外或者农场，所以外部材料一定要防水，耐腐蚀。这样才能提高使用寿命。另外还要易于清洗。

6. 应用目标  
&#8195;&#8195;可以为珍惜植物检测生存环境，创造良好的成长条件；可以为珍稀动物的培育（胚胎，幼体，受精卵培育）创造一定条件。
# 9.详细设计 #
## BOM单 ##

| ID	| Name |	Designator |	Footprint |	Quantity |	Manufacturer Part |	Manufacturer | Supplier | Supplier Part |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | 
|1	|DHT11	|U3	|SENSOR-TH_DHT11	|1	|DHT11	|Aosong (Guangzhou) Elec	|LCSC	|C117051|
|2	|TMB12A24_C781862	|BUZZER1	|BUZ-TH_BD12.0-P7.60-D0.6-FD	|1	|TMB12A24	|YUEXIN	|LCSC	|C781862|
|3	|RA-02	|U2,U2	|WIRELM-SMD_RA-02	|2	|Ra-02	|Ai-Thinker	|LCSC	|C90039|
|4	|NodeMCU-32SLua	|U1,U1	|NODEMCU-32SLUA	|2	|NodeMCU-32SLua	|Ai-Thinker	|LCSC	|C111436|

## 加工制造过程 ##
[https://zaowu.fun/p/6000345336531447f6c5b3bb](https://zaowu.fun/p/6000345336531447f6c5b3bb)
# 10.性能指标 #
- 1.外观  
&#8195;&#8195;产品外包装采用透明可降解环保材料，整体形状呈长方体，表面清晰、光滑、无裂痕，固定牢固无松动，外露线整齐。
- 2.配线与供电  
&#8195;&#8195;整体布线整齐合理已更换，无漏电、老旧现象。供电装置采用太阳能电池板与铅酸蓄电池相结合，铅酸蓄电池安全稳定寿命长，而太阳能电池板加上控制器可以在晴天为铅酸蓄电池充满电，控制器保护自动停止充电，在夜晚控制器截断回流电保护电路板，按需分配电流保护铅酸蓄电池。既不用布线和安装线路，也不用人工充电。此外，太阳能电池板无惧雷电风雪，能够承受强风积雪的承载，因此降低了维护的成本，实现了环保高效的供电方式。
- 3.工作电压  
&#8195;&#8195;太阳能电池板连接到降压模块再与铅酸蓄电池连接，太阳能电池板连接到降压模块后，降压模块可以实现电压再1.25V到40V的连续可调，效率高达92%，最终保证供电的稳定。
最低电压（V）	3.3 &#8195;&#8195;最高电压（V）	5
- 4.测试范围  
&#8195;&#8195;温度测量范围为-20—60，湿度测量范围为20%—95%，符合客户的需求。
- 5.环境耐受力  
&#8195;&#8195;产品的工作温度为-20—70，耐低温性和耐高温性强；外包装采用高压环保防水材质，可以抵抗户外的高强度机械冲击，避免因产品进水而造成的线路问题，同时也不会对环境产生不利影响；供电装置能够承受户外雷电风雪，保障了户外供电的稳定性。因此，产品具有很强的环境耐受力。
- 6.环境影响  
&#8195;&#8195;空气湿润，会对设备的金属元件和衔接处会构成生锈影响，并导致电路板，衔接器材和布线的绝缘下降，严峻情况下也许会导致电路短路。当湿度增大时，元器材或由介质资料外表简单构成水膜，构成“导电小路”和“飞弧景象”然后导致设备毛病，而当湿度过低，也就是说枯燥的情况下，静电电压会增高，影响设备的作业情况。  
&#8195;&#8195;设备中使用的各种器件，在进行长时间作业状态下都会发热升温，当温度增加时，各器件的功能就会随之降低。而发热器件向空气中释放热量会使环境温度增加，使得本身的散热作用削弱，进一步致使器件温度增加，影响设备正常运作。经过温湿度传感器对环境温度进行检测，当温度过高时启动提示外界人员，确保环境温度正常。  
&#8195;&#8195;此外，环境的湿度也需求保持在适宜的范围内。如果空气相对湿度过低，即空气过于枯燥时，静电压会显著增加，严重危害设备，如果空气相对湿度过高，空气中水蒸气简单在电路表面构成水膜，形成电路和飞弧景象，危害设备。
# 11.代码 #
## 节点 ##
&#8195;&#8195;添加DHT.h和LoRaNow.h头文件后，将Lora，DHT11，和ESP32引脚绑定好。LoRaNow.begin()为true后，将循环执行一下操作：开发板接收到温湿度传感器采集到数据后通过一定的数据处理，得到与标准温湿度（19°C）的差值，最后通过Lora通信模块将这个差值传输给网关。
## 网关 ##
&#8195;&#8195;添加完头文件后，将Lora，蜂鸣器，和ESP32引脚绑定好。修改好WIFI名称和密码，开始运行后会自动该WIFI，并创建一个简单的网页。接收到节点组传输的数据后会通过mqtt发送信息，在网页上显示出介绍到的数据，该数据是与标准温度的差值。如果大于等于1蜂鸣器就会发出警报。其中判断语句为if(atoi((const char *)buffer)==0) ，用到了强制转换。
# 12.代码如何运行 #
&#8195;&#8195;通过[https://github.com/espressif/arduino-esp32](https://github.com/espressif/arduino-esp32)中的详细步骤介绍，下载Git Gui后填好相关信息安装ESP32的开发环境，然后在库管理器中安装需要的库，如esp32、LoRaNow、DHT sensor library、PubSubClient等需要的库。